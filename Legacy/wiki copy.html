<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta-Mind: Architectural Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfbf7;
            /* Warm Neutral Background (Cream/Paper) */
            color: #1c1917;
            /* Warm Black/Charcoal */
        }

        /* --- Chart Container Logic (Mandatory) --- */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            /* Default, constrained by parent grid */
            height: 300px;
            /* Base height */
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* --- Custom UI Elements --- */
        .nav-item.active {
            border-bottom: 2px solid #ea580c;
            /* Burnt Orange Accent */
            color: #ea580c;
            font-weight: 600;
        }

        .phase-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .phase-card:hover {
            transform: translateX(4px);
            background-color: #fef3c7;
            /* Light Amber hover */
        }

        .phase-card.active-phase {
            border-left-color: #ea580c;
            background-color: #fff7ed;
        }

        /* --- MVP Simulator Styles --- */
        #sim-canvas {
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
            cursor: crosshair;
        }

        .sim-node {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #4f46e5;
            position: absolute;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
            z-index: 10;
        }

        .sim-node:hover {
            transform: translate(-50%, -50%) scale(1.1);
            cursor: pointer;
        }

        .radial-menu {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            /* Let clicks pass through to buttons */
            z-index: 5;
            display: none;
            /* Hidden by default */
        }

        .radial-btn {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #fff;
            border: 1px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            pointer-events: auto;
            cursor: pointer;
            transition: background 0.2s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .radial-btn:hover {
            background: #ea580c;
            color: white;
            border-color: #ea580c;
        }

        /* Positioning radial buttons around center */
        .radial-btn:nth-child(1) {
            top: 0;
            left: 50%;
            transform: translate(-50%, 0);
        }

        /* Top */
        .radial-btn:nth-child(2) {
            top: 50%;
            right: 0;
            transform: translate(0, -50%);
        }

        /* Right */
        .radial-btn:nth-child(3) {
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
        }

        /* Bottom */
        .radial-btn:nth-child(4) {
            top: 50%;
            left: 0;
            transform: translate(0, -50%);
        }

        /* Left */
    </style>
    <!-- Chosen Palette: Architectural Warmth (Warm Neutrals, Slate, Burnt Orange Accent) -->
    <!-- Application Structure Plan: 
         1. Header: Brand & High-level Mission.
         2. Tab Navigation: Switching between logical views (Vision, Architecture, Roadmap, UX Lab).
         3. View 1 (Vision): Text-heavy but organized cards for Mission/Principles.
         4. View 2 (Architecture): Visual block diagram using HTML/Grid to show stack layers.
         5. View 3 (Roadmap): Interactive Chart.js Gantt chart + List view of tasks from CSV data.
         6. View 4 (UX Lab): A JS-powered "Canvas Simulator" to demonstrate the Radial Menu concept mentioned in docs.
         This structure moves from Abstract (Vision) to Concrete (Roadmap) to Tangible (UX Lab).
    -->
    <!-- Visualization & Content Choices:
         - Roadmap Data -> Timeline -> Horizontal Bar Chart (Chart.js) -> To show overlapping phases clearly.
         - Task Distribution -> Composition -> Donut Chart -> To show effort balance in Phase 1.
         - Tech Stack -> Hierarchy -> Styled HTML Grid -> Clear separation of concerns without SVG.
         - UX Prototype -> Interactive DOM -> JS click handlers -> To demo the "Radial Menu" mechanic.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>

<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-3">
                    <span class="text-2xl font-bold tracking-tight text-stone-800">META-MIND</span>
                    <span
                        class="px-2 py-0.5 rounded text-xs font-medium bg-stone-100 text-stone-500 border border-stone-200">Architectural
                        Hub</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <button onclick="switchTab('vision')"
                        class="nav-item active px-3 py-2 text-sm font-medium transition-colors" id="tab-vision">Vision &
                        Principles</button>
                    <button onclick="switchTab('roadmap')"
                        class="nav-item px-3 py-2 text-sm font-medium transition-colors text-stone-500 hover:text-stone-800"
                        id="tab-roadmap">Master Roadmap</button>
                    <button onclick="switchTab('architecture')"
                        class="nav-item px-3 py-2 text-sm font-medium transition-colors text-stone-500 hover:text-stone-800"
                        id="tab-architecture">Tech Stack</button>
                    <button onclick="switchTab('uxlab')"
                        class="nav-item px-3 py-2 text-sm font-medium transition-colors text-orange-600 hover:text-orange-700 bg-orange-50 rounded-md"
                        id="tab-uxlab">UX Simulator (MVP)</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- VIEW 1: VISION & PRINCIPLES -->
        <div id="view-vision" class="space-y-8 animate-fade-in">
            <div class="max-w-3xl">
                <p class="text-stone-500 text-sm font-semibold uppercase tracking-wide mb-2">Source: Cover Page &
                    Overview</p>
                <h1 class="text-4xl font-extrabold text-stone-900 mb-4">An AI-Native Federated Mapstate Metaverse</h1>
                <p class="text-xl text-stone-600 leading-relaxed">
                    Meta-Mind is a platform uniting real-time AI, persistent mapstate technology, and immersive
                    metaverse experiences.
                    We are dedicated to a principled, collaborative space where people and AI co-create.
                </p>
            </div>

            <!-- Core Pillars Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <!-- Pillar 1 -->
                <div
                    class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition-shadow">
                    <div
                        class="w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center mb-4 text-indigo-600 text-xl font-bold">
                        A</div>
                    <h3 class="text-lg font-bold text-stone-900 mb-2">User Agency & Ownership</h3>
                    <p class="text-stone-600 text-sm">
                        Honoring origins and ownership. We empower individuals to own their data and creations within
                        the federated mapstate.
                    </p>
                </div>
                <!-- Pillar 2 -->
                <div
                    class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition-shadow">
                    <div
                        class="w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center mb-4 text-emerald-600 text-xl font-bold">
                        E</div>
                    <h3 class="text-lg font-bold text-stone-900 mb-2">Ethical Co-creation</h3>
                    <p class="text-stone-600 text-sm">
                        Transparent, ethical innovation. People and AI build together in a trusted space, advancing
                        unified potential.
                    </p>
                </div>
                <!-- Pillar 3 -->
                <div
                    class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition-shadow">
                    <div
                        class="w-12 h-12 bg-orange-50 rounded-full flex items-center justify-center mb-4 text-orange-600 text-xl font-bold">
                        F</div>
                    <h3 class="text-lg font-bold text-stone-900 mb-2">Federated Persistence</h3>
                    <p class="text-stone-600 text-sm">
                        A persistent, decentralized meta-database ensuring the universe scales without central points of
                        failure.
                    </p>
                </div>
            </div>

            <!-- Quote Block -->
            <div class="bg-stone-100 p-8 rounded-lg border-l-4 border-stone-400 mt-8">
                <p class="italic text-stone-700 font-serif text-lg">
                    "Our work empowers individuals, communities, and technologiesâ€”helping all participants reach deeper
                    understanding and greater purpose."
                </p>
            </div>
        </div>

        <!-- VIEW 2: ROADMAP -->
        <div id="view-roadmap" class="hidden space-y-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                <div>
                    <h2 class="text-2xl font-bold text-stone-900">Strategic Roadmap</h2>
                    <p class="text-stone-500 text-sm">Overview of the 6 Development Phases (Weeks 1 - 52+)</p>
                </div>
                <!-- Interactive Filter -->
                <div class="mt-4 md:mt-0 bg-white p-1 rounded-md border border-stone-200 shadow-sm inline-flex">
                    <button class="px-3 py-1 text-xs font-medium bg-stone-100 text-stone-800 rounded shadow-sm"
                        id="btn-all">All Phases</button>
                    <button class="px-3 py-1 text-xs font-medium text-stone-500 hover:text-stone-900" id="btn-mvp">MVP
                        Focus</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Gantt Chart -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-sm font-semibold text-stone-400 uppercase tracking-wide mb-4">Project Timeline</h3>
                    <div class="chart-container">
                        <canvas id="roadmapChart"></canvas>
                    </div>
                </div>

                <!-- Phase Detail List (Interactive) -->
                <div
                    class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 h-full overflow-y-auto max-h-[450px]">
                    <h3 class="text-sm font-semibold text-stone-400 uppercase tracking-wide mb-4">Phase Details</h3>
                    <div class="space-y-3" id="phase-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- MVP Deep Dive Stats -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-sm font-semibold text-stone-400 uppercase tracking-wide mb-4">Phase 1: MVP Effort
                        Allocation</h3>
                    <div class="flex items-center">
                        <div class="w-1/2 chart-container" style="height: 200px;">
                            <canvas id="mvpPieChart"></canvas>
                        </div>
                        <div class="w-1/2 pl-6 space-y-3 text-sm">
                            <p><strong class="text-indigo-600">Mapstate Core (40%):</strong> Canvas, Node Logic, Edges.
                            </p>
                            <p><strong class="text-emerald-600">UI/UX (30%):</strong> Radial Menus, Toolbar.</p>
                            <p><strong class="text-amber-600">Data & Sync (20%):</strong> CRUD, Local Storage.</p>
                            <p><strong class="text-stone-400">Testing (10%):</strong> Unit tests, prototyping.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 flex flex-col justify-center">
                    <h3 class="text-sm font-semibold text-stone-400 uppercase tracking-wide mb-2">Next Milestone</h3>
                    <div class="text-4xl font-bold text-stone-800 mb-1">Week 8</div>
                    <div class="text-orange-600 font-medium mb-4">MVP Release Candidate</div>
                    <p class="text-stone-600 text-sm">
                        Goal: A functional "Mapstate Core" allowing local creation, editing, and connection of nodes
                        with a working Undo/Redo history stack.
                    </p>
                </div>
            </div>
        </div>

        <!-- VIEW 3: ARCHITECTURE -->
        <div id="view-architecture" class="hidden space-y-8">
            <div class="max-w-3xl">
                <h2 class="text-2xl font-bold text-stone-900">Technical Architecture</h2>
                <p class="text-stone-500 text-sm">Layered breakdown of the AI-Native Stack.</p>
            </div>

            <!-- Stack Diagram (HTML/CSS Grid) -->
            <div class="bg-white p-8 rounded-xl shadow-sm border border-stone-200">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">

                    <!-- Frontend -->
                    <div class="col-span-4 md:col-span-1 p-4 bg-indigo-50 border border-indigo-100 rounded-lg">
                        <h4 class="font-bold text-indigo-900 mb-2">Frontend Client</h4>
                        <div class="space-y-2">
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-indigo-700">React SPA
                            </div>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-indigo-700">Konva/Canvas
                                API</div>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-indigo-700">Tailwind CSS
                            </div>
                        </div>
                    </div>

                    <!-- Arrow -->
                    <div class="hidden md:flex flex-col justify-center items-center text-stone-300">
                        <span>&#8646;</span>
                        <span class="text-xs">API / WS</span>
                    </div>

                    <!-- Backend/Orchestration -->
                    <div class="col-span-4 md:col-span-1 p-4 bg-emerald-50 border border-emerald-100 rounded-lg">
                        <h4 class="font-bold text-emerald-900 mb-2">Orchestration</h4>
                        <div class="space-y-2">
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-emerald-700">Node.js /
                                Edge Functions</div>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-emerald-700">GraphQL /
                                REST</div>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-emerald-700">Auth
                                (JWT/OIDC)</div>
                        </div>
                    </div>

                    <!-- Arrow -->
                    <div class="hidden md:flex flex-col justify-center items-center text-stone-300">
                        <span>&#8646;</span>
                        <span class="text-xs">Query</span>
                    </div>

                    <!-- Data & AI -->
                    <div class="col-span-4 md:col-span-1 space-y-4">
                        <div class="p-4 bg-amber-50 border border-amber-100 rounded-lg">
                            <h4 class="font-bold text-amber-900 mb-2">AI Layer</h4>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-amber-700">Gemini 1.5 Pro
                            </div>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-amber-700">Vector
                                Embeddings</div>
                        </div>
                        <div class="p-4 bg-stone-100 border border-stone-200 rounded-lg">
                            <h4 class="font-bold text-stone-900 mb-2">Federated Data</h4>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-stone-700">IPFS /
                                Distributed DB</div>
                            <div class="bg-white p-2 rounded shadow-sm text-xs font-mono text-stone-700">User Pods</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Architecture Notes -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="p-4 border border-stone-200 rounded-lg">
                    <h5 class="font-bold text-stone-800 mb-1">State Management</h5>
                    <p class="text-sm text-stone-600">Using standard React state for MVP, transitioning to CRDTs (Yjs)
                        for Phase 3 real-time collaboration.</p>
                </div>
                <div class="p-4 border border-stone-200 rounded-lg">
                    <h5 class="font-bold text-stone-800 mb-1">Canvas Rendering</h5>
                    <p class="text-sm text-stone-600">HTML5 Canvas for performance. Nodes are objects, not DOM elements,
                        ensuring 60fps with 1000+ nodes.</p>
                </div>
                <div class="p-4 border border-stone-200 rounded-lg">
                    <h5 class="font-bold text-stone-800 mb-1">AI Integration</h5>
                    <p class="text-sm text-stone-600">LLMs are called via edge functions to "synthesize" or "expand" map
                        branches based on user selection.</p>
                </div>
            </div>
        </div>

        <!-- VIEW 4: UX LAB (SIMULATOR) -->
        <div id="view-uxlab" class="hidden space-y-6">
            <div class="flex justify-between items-end">
                <div>
                    <h2 class="text-2xl font-bold text-stone-900">MVP UX Simulator</h2>
                    <p class="text-stone-500 text-sm">
                        Interactive prototype of the "Radial Menu" concept.
                        <span class="text-orange-600 font-medium">Click anywhere on the grid to create a node. Click a
                            node to open menu.</span>
                    </p>
                </div>
                <button onclick="clearCanvas()"
                    class="text-xs px-3 py-2 bg-stone-200 hover:bg-stone-300 rounded text-stone-700 font-medium">Clear
                    Canvas</button>
            </div>

            <!-- The Simulator -->
            <div class="bg-white p-1 rounded-xl shadow-lg border border-stone-200">
                <div id="sim-canvas" class="w-full h-[500px] relative overflow-hidden rounded-lg">
                    <!-- Nodes will be injected here via JS -->
                    <div id="instruction-overlay"
                        class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div
                            class="bg-white/80 backdrop-blur px-4 py-2 rounded-full border border-stone-200 text-stone-500 text-sm shadow-sm">
                            Click empty space to add Node â€¢ Click Node to Interact
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-4 text-sm text-stone-600">
                <div class="p-3 bg-stone-50 rounded border border-stone-100">
                    <strong>1. Spatial Context:</strong> Radial menus appear *around* the object of interest, reducing
                    mouse travel distance (Fitts's Law).
                </div>
                <div class="p-3 bg-stone-50 rounded border border-stone-100">
                    <strong>2. Clean Interface:</strong> No persistent toolbars cluttering the view. UI appears on
                    demand.
                </div>
                <div class="p-3 bg-stone-50 rounded border border-stone-100">
                    <strong>3. Scalability:</strong> This pattern works equally well for 5 nodes or 500 nodes in the
                    MVP.
                </div>
            </div>
        </div>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA STORE ---
        // Extracted from "Meta-Mind SSDs & Docs"
        const projectPhases = [
            { id: 1, name: "Phase 1: MVP (Mapstate Core)", weeks: "1-8", desc: "Canvas, Radial Menu, Timeline, CRUD Logic", tasks: ["Prototyping", "Data Modeling", "Canvas Core", "Undo/Redo", "Offline Prep"] },
            { id: 2, name: "Phase 2: Persistence", weeks: "7-14", desc: "Auth, Profiles, Cloud Storage, Sync", tasks: ["Authentication", "User Profiles", "Map Save/Load", "Conflict Resolution"] },
            { id: 3, name: "Phase 3: Collaboration", weeks: "13-22", desc: "Real-time Sync, Permissions, Share", tasks: ["Multi-user Sockets", "Permissions System", "Sharing Links", "Cursors"] },
            { id: 4, name: "Phase 4: Social", weeks: "21-30", desc: "Gamification, Reputation, Feeds", tasks: ["Activity Feeds", "Reputation Score", "Badges", "Community Goals"] },
            { id: 5, name: "Phase 5: Public Metaverse", weeks: "29-38", desc: "Search, Discovery, Public Lands", tasks: ["Global Search", "Public/Private Lands", "Trending Maps", "Curated Lists"] },
            { id: 6, name: "Phase 6: Federation", weeks: "39-52+", desc: "Sharding, Decentralized Nodes, DAO", tasks: ["Protocol Definition", "Sharding Logic", "DAO Governance", "Scale Opt."] }
        ];

        // --- NAVIGATION ---
        function switchTab(tabId) {
            // Update buttons
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active', 'text-orange-600', 'border-b-2', 'border-orange-600');
                if (!el.id.includes('uxlab')) el.classList.add('text-stone-500');
            });
            const activeBtn = document.getElementById(`tab-${tabId}`);
            activeBtn.classList.add('active');
            activeBtn.classList.remove('text-stone-500');

            // Update Views
            ['vision', 'roadmap', 'architecture', 'uxlab'].forEach(view => {
                document.getElementById(`view-${view}`).classList.add('hidden');
            });
            document.getElementById(`view-${tabId}`).classList.remove('hidden');

            // Trigger chart resize if needed
            if (tabId === 'roadmap') {
                window.dispatchEvent(new Event('resize'));
            }
        }

        // --- ROADMAP CHART CONFIG ---
        function initCharts() {
            // Label Wrapper Utility
            function wrapLabel(str) {
                if (str.length <= 16) return str;
                const words = str.split(' ');
                const lines = [];
                let currentLine = words[0];
                for (let i = 1; i < words.length; i++) {
                    if ((currentLine + " " + words[i]).length < 16) {
                        currentLine += " " + words[i];
                    } else {
                        lines.push(currentLine);
                        currentLine = words[i];
                    }
                }
                lines.push(currentLine);
                return lines;
            }

            // Common Tooltip Config
            const tooltipConfig = {
                callbacks: {
                    title: function (context) {
                        let label = context[0].label;
                        return Array.isArray(label) ? label.join(' ') : label;
                    }
                },
                backgroundColor: '#1c1917',
                titleColor: '#fff',
                bodyColor: '#d6d3d1',
                padding: 12,
                cornerRadius: 4
            };

            // 1. GANTT CHART (Horizontal Bar)
            const ctxRoadmap = document.getElementById('roadmapChart').getContext('2d');
            new Chart(ctxRoadmap, {
                type: 'bar',
                data: {
                    labels: projectPhases.map(p => wrapLabel(p.name)),
                    datasets: [{
                        label: 'Duration (Weeks)',
                        // Data format: [Start Week, End Week]
                        data: [
                            [1, 8],
                            [7, 14],
                            [13, 22],
                            [21, 30],
                            [29, 38],
                            [39, 52]
                        ],
                        backgroundColor: [
                            'rgba(99, 102, 241, 0.8)', // Indigo (MVP)
                            'rgba(16, 185, 129, 0.7)', // Emerald
                            'rgba(245, 158, 11, 0.7)', // Amber
                            'rgba(236, 72, 153, 0.7)', // Pink
                            'rgba(14, 165, 233, 0.7)', // Sky
                            'rgba(168, 85, 247, 0.7)'  // Purple
                        ],
                        borderRadius: 4,
                        barPercentage: 0.6
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: tooltipConfig
                    },
                    scales: {
                        x: {
                            min: 0,
                            max: 55,
                            title: { display: true, text: 'Timeline (Weeks)' },
                            grid: { color: '#e7e5e4' }
                        },
                        y: {
                            grid: { display: false }
                        }
                    }
                }
            });

            // 2. MVP PIE CHART
            const ctxPie = document.getElementById('mvpPieChart').getContext('2d');
            new Chart(ctxPie, {
                type: 'doughnut',
                data: {
                    labels: ['Mapstate Core', 'UI/UX', 'Data & Sync', 'Testing'],
                    datasets: [{
                        data: [40, 30, 20, 10],
                        backgroundColor: ['#4f46e5', '#10b981', '#f59e0b', '#a8a29e'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: tooltipConfig
                    },
                    cutout: '65%'
                }
            });
        }

        // --- PHASE LIST GENERATOR ---
        function renderPhaseList() {
            const container = document.getElementById('phase-list');
            container.innerHTML = projectPhases.map(phase => `
                <div class="phase-card p-3 bg-stone-50 rounded border border-stone-100 cursor-pointer">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-stone-800 text-sm">${phase.name}</span>
                        <span class="text-xs bg-white border border-stone-200 px-2 py-0.5 rounded text-stone-500">Wk ${phase.weeks}</span>
                    </div>
                    <p class="text-xs text-stone-600 mb-2">${phase.desc}</p>
                    <div class="flex flex-wrap gap-1">
                        ${phase.tasks.map(t => `<span class="text-[10px] px-1.5 py-0.5 bg-stone-200 text-stone-600 rounded-sm">${t}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // --- UX LAB: SIMULATOR LOGIC ---
        const canvas = document.getElementById('sim-canvas');
        let nodeCount = 0;

        canvas.addEventListener('click', function (e) {
            // If clicking on the background (not a node or menu), create a node
            if (e.target === canvas) {
                // Remove existing menus
                document.querySelectorAll('.radial-menu').forEach(el => el.remove());
                document.getElementById('instruction-overlay').style.display = 'none';

                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                createNode(x, y);
            }
        });

        function createNode(x, y) {
            nodeCount++;
            const node = document.createElement('div');
            node.className = 'sim-node';
            node.style.left = x + 'px';
            node.style.top = y + 'px';
            node.innerHTML = nodeCount;

            // Interaction: Click Node -> Show Menu
            node.addEventListener('click', function (e) {
                e.stopPropagation(); // Prevent canvas click

                // Remove other menus
                document.querySelectorAll('.radial-menu').forEach(el => el.remove());

                showRadialMenu(node);
            });

            canvas.appendChild(node);
        }

        function showRadialMenu(nodeElement) {
            const menu = document.createElement('div');
            menu.className = 'radial-menu';

            // Menu Items (Edit, Link, Delete, Color)
            const icons = ['âœŽ', 'â˜', 'âœ•', 'ðŸŽ¨']; // Unicode icons

            icons.forEach(icon => {
                const btn = document.createElement('div');
                btn.className = 'radial-btn';
                btn.innerHTML = icon;
                btn.onclick = (e) => {
                    e.stopPropagation();
                    if (icon === 'âœ•') {
                        nodeElement.remove();
                        menu.remove();
                    } else if (icon === 'ðŸŽ¨') {
                        nodeElement.style.borderColor = '#ea580c';
                        nodeElement.style.color = '#ea580c';
                    } else {
                        alert('Prototype Interaction: ' + (icon === 'âœŽ' ? 'Edit' : 'Connect'));
                    }
                };
                menu.appendChild(btn);
            });

            // Position menu exactly over node center
            menu.style.left = nodeElement.style.left;
            menu.style.top = nodeElement.style.top;

            canvas.appendChild(menu);
        }

        function clearCanvas() {
            document.querySelectorAll('.sim-node').forEach(n => n.remove());
            document.querySelectorAll('.radial-menu').forEach(m => m.remove());
            document.getElementById('instruction-overlay').style.display = 'flex';
            nodeCount = 0;
        }

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            renderPhaseList();
        });

    </script>
</body>

</html>